<!-- Set up the Tabs -->
<input type="radio" class="sheet-tab sheet-tab1" name="attr_core-tab" value="1" title="Player Sheet" checked="checked"/>
<span class="sheet-tab sheet-tab1" style='line-height: 40px;'>Player Sheet</span>

<input type="radio" class="sheet-tab sheet-tab2" name="attr_core-tab" value="2" title="Gear" />
<span class="sheet-tab sheet-tab2" style='line-height: 40px;'>Gear</span>

<input type="radio" class="sheet-tab sheet-tab3" name="attr_core-tab" value="3" title="Advancements" />
<span class="sheet-tab sheet-tab3" style='line-height: 40px;'>Advancements</span>

<input type="radio" class="sheet-tab sheet-tab4" name="attr_core-tab" value="4" title="NPCS and Minions" />
<span class="sheet-tab sheet-tab4" style='line-height: 40px;'>NPCS</span>

<input type="radio" class="sheet-tab sheet-tab5" name="attr_core-tab" value="5" title="Personal Journal" />
<span class="sheet-tab sheet-tab5" style='line-height: 40px;'>Journal</span>

<input type="radio" class="sheet-tab sheet-tab6" name="attr_core-tab" value="6" title="Vehicles" />
<span class="sheet-tab sheet-tab6" style='line-height: 40px;'>Vehicles</span>

<input type="radio" class="sheet-tab sheet-tab7" name="attr_core-tab" value="7" title="Psykana" />
<span class="sheet-tab sheet-tab7" style='line-height: 40px;'>Psykana</span>

<input type="radio" class="sheet-tab sheet-tab8" name="attr_core-tab" value="8" title="Ship" />
<span class="sheet-tab sheet-tab8" style='line-height: 40px;'>Ship</span>

<br><br>
<!-- End Tab setup -->

<div class="sheet-section-core"><!-- Core Tab -->
	<div class="sheet-wrapper">

<!-- Basic Player Character Information -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->

		<div class="sheet-3colrow">

			<!-- Left Column  -->
			<div class="sheet-col">
				<div class="sheet-row">
					<div class="sheet-item" style="width:40%"><label>Character Name</label></div>
					<div class="sheet-item" style="width:55%"><input name="attr_character_name" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:30%"><label>Home World</label></div>
					<div class="sheet-item" style="width:65%"><input name="attr_Homeworld" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:30%"><label>Background</label></div>
					<div class="sheet-item" style="width:65%"><input name="attr_Background" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:15%"><label>Role</label></div>
					<div class="sheet-item" style="width:80%"><input name="attr_Role" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:33%"><label>Elite Advances</label></div>
					<div class="sheet-item" style="width:62%"><input name="attr_EliteAdvances" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:25%"><label>Divination</label></div>
					<div class="sheet-item" style="width:70%"><input name="attr_Divination" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:15%"><label>Notes</label></div>
					<div class="sheet-item" style="width:80%"><input name="attr_Notes" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:95%"><input name="attr_Notes2" type="text"></div>
				</div>
			</div>

			<!-- Mid Column (Logo) -->
			<div class="sheet-col">
				<img src="https://i.imgur.com/rVbRWKo.png?2">
			</div>

			<!-- Right Column  -->
			<div class="sheet-col">
				<div class="sheet-row">
					<div class="sheet-item" style="width:30%"><label>Player Name</label></div>
					<div class="sheet-item" style="width:65%"><input name="attr_Player" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:18%"><label>Gender</label></div>
					<div class="sheet-item" style="width:18%"><input name="attr_Gender" type="text"></div>
					<div class="sheet-item" style="width:10%"><label>Age</label></div>
					<div class="sheet-item" style="width:10%"><input name="attr_Age" type="text"></div>
					<div class="sheet-item" style="width:14%"><label>Build</label></div>
					<div class="sheet-item" style="width:26%"><input name="attr_Build" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:25%"><label>Complexion</label></div>
					<div class="sheet-item" style="width:28%"><input name="attr_Complexion" type="text"></div>
					<div class="sheet-item" style="width:20%"><label>Hair/Eye</label></div>
					<div class="sheet-item" style="width:22%"><input name="attr_Hair" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:18%"><label>Quirks</label></div>
					<div class="sheet-item" style="width:77%"><input name="attr_Quirks" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:30%"><label>Superstitions</label></div>
					<div class="sheet-item" style="width:65%"><input name="attr_Superstitions" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:25%"><label>Momentos</label></div>
					<div class="sheet-item" style="width:70%"><input name="attr_Momentos" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:18%"><label>Allies</label></div>
					<div class="sheet-item" style="width:77%"><input name="attr_Allies" type="text"></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:20%"><label>Enemies</label></div>
					<div class="sheet-item" style="width:75%"><input name="attr_Enemies" type="text"></div>
				</div>
			</div>
		</div>

<!-- First Part = Characteristics\Experience&Fate\Insanity&Corruption\Skills -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
		<hr class="sheet-dhhr">
		<div class="sheet-2colrow">
			<!-- Left Side -->
			<div class="sheet-col">
				<div class="sheet-characteristics">
				<h3>Characteristics</h3>
				<div class="sheet-2colrow">

					<!-- Left Column (Characteristics) -->
					<div class="sheet-col">

						<!-- WeaponSkill (WS) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_WS" type="roll" value="!WS+?{Modifier|0}"><label>Weapon Skill (WS)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_WeaponSkill" type="text" value="0">
								<input name="attr_UnWS" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advanceWS">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>

						<!-- BallisticSkill (BS) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_BS" type="roll" value="!BS+?{Modifier|0}"><label>Ballistic Skill (BS)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_BallisticSkill" type="text" value="0">
								<input name="attr_UnBS" class="sheet-unnatural" type="number" value="0" />
							</div>
							</div>
						</div>

						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advanceBS">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>

						<!-- Strength (S) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_S" type="roll" value="!S+?{Modifier|0}"><label>Strength (S)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_Strength" type="text" value="0">
								<input name="attr_UnS" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>

						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advanceS">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>

						<!-- Toughness (T) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_T" type="roll" value="!T+?{Modifier|0}"><label>Toughness (T)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_Toughness" type="text" value="0">
								<input name="attr_UnT" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>

						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advanceT">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>

						<!-- Agility (Ag) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_Ag" type="roll" value="!Ag+?{Modifier|0}"><label>Agility (Ag)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_Agility" type="text" value="0">
								<input name="attr_UnAg" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>

						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advanceAg">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>
					</div>

					<!-- Characteristics (Right Column) -->
					<div class="sheet-col">

						<!-- Intelligence (Int) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_Int" type="roll" value="!It+?{Modifier|0}"><label>Intelligence (Int)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_Intelligence" type="text" value="0">
								<input name="attr_UnInt" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>

						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advanceInt">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>

						<!-- Perception (Per) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_Per" type="roll" value="!Per+?{Modifier|0}"><label>Perception (Per)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_Perception" type="text" value="0">
								<input name="attr_UnPer" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>

						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advancePer">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>

						<!-- Willpower (WP) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_WP" type="roll" value="!Wp+?{Modifier|0}"><label>Willpower (WP)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_Willpower" type="text" value="0">
								<input name="attr_UnWP" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>

						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advanceWP">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>

						<!-- Fellowship (Fel) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_Fel" type="roll" value="!Fe+?{Modifier|0}"><label>Fellowship (Fel)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_Fellowship" type="text" value="0">
								<input name="attr_UnFel" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>

						<div class="sheet-row">
							<div class="sheet-item" style="width:10%"></div>
							<div class="sheet-item" style="width:80%">
								<select class="advanceselect" name="attr_advanceFel">
									<option value="0">None (0)</option>
									<option value="5">Simple (+5)</option>
									<option value="10">Intermediate (+10)</option>
									<option value="15">Trained (+15)</option>
									<option value="20">Proficient (+20)</option>
									<option value="25">Expert (+25)</option>
								</select>
							</div>
						</div>

						<!-- Influence (Ifl) -->
						<div class="sheet-2colrow">
							<div class="sheet-col">
								<button name="roll_Inf" type="roll" value="!Renown+?{Modifier|0}"><label>Influence (Inf)</label></button>
							</div>
							<div class="sheet-col">
							    <div class="sheet-unnatural_box">
								<input name="attr_Influence" type="text" value="0">
								<input name="attr_UnInf" class="sheet-unnatural" type="number" value="0" />
								</div>
							</div>
						</div>

					</div>
				</div>
				</div>
				<br> <!-- break between Characteristics and Unnaturals -->
			<hr class="sheet-dhhr">
				<div class="sheet-2colrow">
					<div class="sheet-col">
						<h3>Fate Points</h3>
						<div class="sheet-row">
							<div class="sheet-item" style="width:35%">
								<label>Threshold</label>
							</div>
							<div class="sheet-item" style="width:20%">
								<input name="attr_Fate_max" type="number" style="text-align: center;">
							</div>
							<div class="sheet-item" style="width:25%">
								<label>Current</label>
							</div>
							<div class="sheet-item" style="width:20%">
								<input name="attr_Fate" type="number" style="text-align: center;">
							</div>
						</div>
					</div>
					<div class="sheet-col">
						<h3>Initiative</h3>
						<div class="sheet-row">
							<div class="sheet-item" style="width:30%">
								<button name="roll_Initiative" title="Select your token first!" type="roll" value="!init"><label>Agility</label></button>
							</div>
							<div class="sheet-item" style="width:1%">
							</div>
							<div class="sheet-item" style="width:35%">
								<button name="roll_CInitiative" title="Select your token first!" type="roll" value="!init = [[@{selected|CInitiativeInput}]]"><label>Custom</label></button>
							</div>
							<div class="sheet-item" style="width:34%">
								<input name="attr_CInitiativeInput" type="text" value="1d10">
							</div>
						</div>
					</div>
				</div>
				<br>
				</br>
				<div class="sheet-quickborder">
					<h3>Movement</h3>
					<div class="sheet-row">
						<div class="sheet-item" style="width: 20%;"><label>Half Move: </label></div>
						<div class="sheet-item" style="width: 8%;"><input name="attr_HalfMove" type="number" value="0" placeholder="AB" style="text-align: center;"/></div>
						<div class="sheet-item" style="width: 20%;"><label>Full Move: </label></div>
						<div class="sheet-item" style="width: 8%;"><input name="attr_FullMove" type="number" value="0" placeholder="x2" style="text-align: center;"/></div>
						<div class="sheet-item" style="width: 16%;"><label>Charge: </label></div>
						<div class="sheet-item" style="width: 8%;"><input name="attr_ChargeMove" type="number" value="0" placeholder="x3" style="text-align: center;"/></div>
						<div class="sheet-item" style="width: 10%;"><label>Run: </label></div>
						<div class="sheet-item" style="width: 8%;"><input name="attr_RunMove" type="number" value="0" placeholder="x6" style="text-align: center;"/></div>
					</div>
					<div class="sheet-row">
						<h3>Fatigue</h3>
						<div class="sheet-item" style="width: 20%;"><label>Threshold:</label></div>
						<div class="sheet-item" style="width: 8%;"><input name="attr_FatigueThreshold" type="number" style="text-align: center;"/></div>
						<div class="sheet-item" style="width: 16%;"><label>Current: </label></div>
						<div class="sheet-item" style="width: 8%;"><input name="attr_Fatigue" type="number" style="text-align: center;"/></div>
					</div>
			<br/>
					<br><br/>
					<h3>Armour &amp; Defence</h3>
					<div class="sheet-2colrow">
						<div class="sheet-col">
							<div class="sheet-armourblock">&nbsp;</div>
							<div class="sheet-quickborder sheet-armourblock"><label>Head</label> <input name="attr_HArmour" type="number" placeholder="Ar" /> <label>(1-10)</label> <input name="attr_HTotal" type="number" placeholder="Soak"/></div>
						<br />
							<div class="sheet-quickborder sheet-armourblock"><label>AR</label> <input name="attr_ArArmour" type="number" placeholder="Ar"/> <label>(11-20)</label> <input name="attr_ArTotal" type="number"  placeholder="Soak"/></div>
							<div class="sheet-quickborder sheet-armourblock"><label>Body</label> <input name="attr_BArmour" type="number" placeholder="Ar"/> <label>(31-70)</label> <input name="attr_BTotal" type="number"  placeholder="Soak"/></div>
							<div class="sheet-quickborder sheet-armourblock"><label>AL</label> <input name="attr_AlArmour" type="number" placeholder="Ar"/> <label>(21-30)</label> <input name="attr_AlTotal" type="number" placeholder="Soak"/></div>
							<div class="sheet-quickborder sheet-armourblock" style="margin: 20px auto auto 11%;"><label>LR</label> <input name="attr_LrArmour" type="number" placeholder="Ar"/> <label>(71-85)</label> <input name="attr_LrTotal" type="number" placeholder="Soak"/></div>
							<div class="sheet-quickborder sheet-armourblock" style="margin: 20px auto auto 11%;"><label>LL</label> <input name="attr_LlArmour" type="number" placeholder="Ar"/> <label>(86-00)</label> <input name="attr_LlTotal" type="number" placeholder="Soak"/></div>
						</div>
						<div class="sheet-col sheet-fate">
							<h3>Wounds</h3>
							<div class="sheet-row">
								<div class="sheet-item" style="width:65%">
									<label>Total: </label>
								</div>
								<div class="sheet-item" style="width:20%">
									<input name="attr_Wounds_max" type="number" style="text-align: center;">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:65%">
									<label>Current: </label>
								</div>
								<div class="sheet-item" style="width:20%">
									<input name="attr_Wounds" type="number" style="text-align: center;">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:65%">
									<label>Critical Damage: </label>
								</div>
								<div class="sheet-item" style="width:20%">
									<input name="attr_Critical" type="number" style="text-align: center;">
								</div>
							</div>
							<h3>Conditions</h3>
							<div class="sheet-row">
								<div class="sheet-item" style="width:100%">
									<input name="attr_1stCondition" type="text">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:100%">
									<input name="attr_2ndCondition" type="text">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:100%">
									<input name="attr_3rdCondition" type="text">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:100%">
									<input name="attr_4thCondition" type="text">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:100%">
									<input name="attr_5thCondition" type="text">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:100%">
									<input name="attr_6thCondition" type="text">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:100%">
									<input name="attr_7thCondition" type="text">
								</div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width:100%">
									<input name="attr_8thCondition" type="text">
								</div>
							</div>
						</div>
					</div>
					<h3>Size</h3>
					<div class="sheet-item" style="width: 45%;"><select class="sizeselect" name="attr_Size">
						<option value="0">Average (4)</option>
						<option value="-3">Miniscule (1)</option>
						<option value="-2">Puny (2)</option>
						<option value="-1">Weedy (3)</option>
						<option value="1">Hulking (5)</option>
						<option value="2">Enormous (6)</option>
						<option value="3">Massive (7)</option>
						<option value="4">Immense (8)</option>
						<option value="5">Monumental (9)</option>
						<option value="6">Titanic (10)</option>
					</div>
				</div>
				<br> <!-- Break between Armor and Defense and Special Abilities -->
				<hr class="sheet-dhhr">
				<h3>Special Abilities</h3>
				<fieldset class="repeating_SAbilities">
					<div><input style="font-size: 18pt; height: 35px;" align="middle" name="attr_SpecialTitleRe" type="text"></div>
					<textarea name="attr_othernotesRe"></textarea>
				</fieldset>
			</div>

		<!-- Right Side -->
			<div class="sheet-col">
				<h3>Skills</h3>
				<fieldset class="repeating_advancedskills">
					<table>
						<tr>
							<td>
							<div class="sheet-row">
								<div class="sheet-item sheet-bigger">
									<input class="sheet-baseinfo" name="attr_advancedskillname" type="text">
								</div>
								<div class="sheet-item sheet-med">
									<select class="charaselect" name="attr_advancedskillcharacteristic">
										<option value="@{WeaponSkill}">(WS)</option>
										<option value="@{BallisticSkill}">(BS)</option>
										<option value="@{Strength}">(S)</option>
										<option value="@{Toughness}">(T)</option>
										<option value="@{Agility}">(Ag)</option>
										<option value="@{Intelligence}">(Int)</option>
										<option value="@{Perception}">(Per)</option>
										<option value="@{Willpower}">(Wp)</option>
										<option value="@{Fellowship}">(Fel)</option>
										<option value="@{Influence}">(Inf)</option>
										<option value="@{Corruption}">(Cor)</option>
										<option value="@{Insanity}">(Ins)</option>
									</select>
								</div>
							</div>
							</td>
							<td><input name="attr_advancedskillbox1" type="checkbox" value="20"></td>
							<td><input name="attr_advancedskillbox2" type="checkbox" value="10"></td>
							<td><input name="attr_advancedskillbox3" type="checkbox" value="10"></td>
							<td><input name="attr_advancedskillbox4" type="checkbox" value="10"></td>
							<td class="roll_advancedskill">
								<button name="roll_advancedskill" type="roll" value="!@{advancedskillname}+?{Modifier|0}">
									<input disabled="true" name="attr_advancedskill" type="number" value=" -20 +@{advancedskillbox1}+@{advancedskillbox2}+@{advancedskillbox3}+@{advancedskillbox4}">
								</button>
							</td>
						</tr>
					</table>
				</fieldset>
				<br><!-- Break between Skills and Talents -->
				<hr class="sheet-dhhr">
				<h3>Talents</h3>
				<fieldset class="repeating_Talents">
					<div class="sheet-item" style="width:90%">
						<input name="attr_Talents" type="text">
					</div>
					<div class="sheet-item" style="width:10%">
						<input name="attr_TalentsPage" type="text" placeholder="pg#" style="text-align: center;">
					</div>
				</fieldset>
				<br><!-- Break between Talents and Traits -->
				<hr class="sheet-dhhr">
				<h3>Traits</h3>
				<fieldset class="repeating_Abilities">
					<div class="sheet-item" style="width:90%">
						<input name="attr_Abilities" type="text" >
					</div>
					<div class="sheet-item" style="width:10%">
						<input name="attr_TraitsPages" type="text" placeholder="pg#" style="text-align: center;">
					</div>
				</fieldset>
			</div>
		</div>
	</div>
</div>

<div class="sheet-section-advancements"><!-- Advancements Tab -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
	<div class="sheet-wrapper">
		<h3>Aptitudes</h3>
		<div class="sheet-2colrow">
			<div class="sheet-col">
				<div class="sheet-row">
					<div class="sheet-item" style="width:100%">
						<input name="attr_1stAptitude" type="text">
					</div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:100%">
						<input name="attr_2ndAptitude" type="text">
					</div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:100%">
						<input name="attr_3rdAptitude" type="text">
					</div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:100%">
						<input name="attr_4thAptitude" type="text">
					</div>
				</div>
			</div>
			<div class="sheet-col">
				<div class="sheet-row">
					<div class="sheet-item" style="width:100%">
						<input name="attr_5thAptitude" type="text">
					</div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:100%">
						<input name="attr_6thAptitude" type="text">
					</div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:100%">
						<input name="attr_7thAptitude" type="text">
					</div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width:100%">
						<input name="attr_8thAptitude" type="text">
					</div>
				</div>
			</div>
		</div>
		<div class="sheet-2colrow">
			<div class="sheet-fate"> 	<!-- Left Column (Experience) -->
				<br></br>
				<h3>Experience</h3>
				<div class="sheet-row">
					<div class="sheet-item" style="width:12%">
						<label>XP to Spend:</label>
					</div>
					<div class="sheet-item" style="width:22%">
						<input disabled="true" name="attr_XPtoSpend" type="number" value="@{XPTotal} - @{XPSpent}">
					</div>
					<div class="sheet-item" style="width:1%"></div>
					<div class="sheet-item" style="width:10%">
						<label>Total Spent:</label>
					</div>
					<div class="sheet-item" style="width:24%">
						<input name="attr_XPSpent" type="number" value="0" readonly>
					</div>
					<div class="sheet-item" style="width:1%"></div>
					<div class="sheet-item" style="width:5%">
						<label>Total:</label>
					</div>
					<div class="sheet-item" style="width:25%">
						<input name="attr_XPTotal" type="number" value="0">
					</div>
				</div>
			</div>
		</div>
		<label>Advancements Taken:</label>
		<fieldset class="repeating_advancements">
			<div class="sheet-row">
				<div class="sheet-item" style="width:26%;">
					<input name="attr_advancementRe1" type="text">
				</div>
				<div class="sheet-item sheet-puny sheet-center sheet-brackets sheet-armourblock">
					<input name="attr_advancementRe1xp" type="number" value="0">
				</div>
				<div class="sheet-item" style="width:26%;">
					<input name="attr_advancementRe2" type="text">
				</div>
				<div class="sheet-item sheet-puny sheet-center sheet-brackets sheet-armourblock">
					<input name="attr_advancementRe2xp" type="number" value="0">
				</div>
				<div class="sheet-item" style="width:26%;">
					<input name="attr_advancementRe3" type="text">
				</div>
				<div class="sheet-item sheet-puny sheet-center sheet-brackets sheet-armourblock">
					<input name="attr_advancementRe3xp" type="number" value="0">
				</div>
			</div>
		</fieldset>
		<br></br>
		<!-- Left Column (Insanity and Corruption) -->
		<div class="sheet-2colrow">
			<div class="sheet-col sheet-fate">
				<div class="sheet-quickborder">
					<h3>Insanity (Is)</h3>
					<div class="sheet-row">
						<div class="sheet-item" style="width:45%"></div>
						<div class="sheet-item" style="width:20%">
							<input name="attr_Insanity" type="number" placeholder="0" style="text-align: center;">
						</div>
					</div>
					<div class="sheet-row">
						<div class="sheet-item" style="width:25%"></div>
						<div class="sheet-item" style="width:60%"><label>Mental Disorders</label></div>
					</div>
						<textarea name="attr_1stDisorder"></textarea>
					<fieldset class="repeating_Disorders">
						<textarea name="attr_DisorderRe"></textarea>
					</fieldset>
				</div>
			</div>
			<div class="sheet-col sheet-fate">
				<div class="sheet-quickborder">
					<h3>Corruption (C)</h3>
					<div class="sheet-row">
						<div class="sheet-item" style="width:45%"></div>
						<div class="sheet-item" style="width:20%">
							<input name="attr_Corruption" type="number" placeholder="0" style="text-align: center;">
						</div>
					</div>
					<div class="sheet-row">
						<div class="sheet-item" style="width:30%"></div>
						<div class="sheet-item" style="width:60%"><label>Malignancies</label></div>
					</div>
					<div class="sheet-row">
						<div class="sheet-item" style="width:100%">
							<input name="attr_1stMalignancy" type="text">
						</div>
					</div>
					<fieldset class="repeating_Malignancys">
						<div class="sheet-row">
							<div class="sheet-item" style="width:100%;">
								<input name="attr_MalignancyRe" type="text">
							</div>
						</div>
					</fieldset>
					<div class="sheet-row">
						<div class="sheet-item" style="width:35%"></div>
						<div class="sheet-item" style="width:60%"><label>Mutations</label></div>
					</div>
					<div class="sheet-row">
						<div class="sheet-item" style="width:100%">
							<input name="attr_1stMutation" type="text">
						</div>
					</div>
					<fieldset class="repeating_Unations">
						<div class="sheet-row">
							<div class="sheet-item" style="width:100%;">
								<input name="attr_UnationRe" type="text">
							</div>
						</div>
					</fieldset>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="sheet-section-npcsandminions"><!-- Npcs and Minions Tab -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
	<div class="sheet-wrapper">
		<fieldset class="repeating_NPC">
		<input type="checkbox" class="arrow" /> <!-- This is the selector that enables hiding a grouped area -->
		<div class="hbody"><!-- This is the start of the hidden div -->
				<div class="sheet-quickborder"> <!-- NPC Narrative lines -->
			  <div class="sheet-row">
						<div class="sheet-item" style="width:10%"><label>Name:</label></div>
						<div class="sheet-item" style="width:30%"><input name="attr_NPCName" type="text"></div>
						<div class="sheet-item" style="width:10%"><label>Type:</label></div>
						<div class="sheet-item" style="width:50%"><input name="attr_NPCType" type="text"></div>
							</div>
							<div class="sheet-row">
						<div class="sheet-item" style="width:10%"><label>Homeworld</label></div>
						<div class="sheet-item" style="width:30%"><input name="attr_NPChomeworld" type="text"></div>
						<div class="sheet-item" style="width:10%"><label>Background:</label></div>
						<div class="sheet-item" style="width:50%"><input name="attr_NPCbackground" type="text"></div>
							</div>
							<div class="sheet-row">
						<div class="sheet-item" style="width:10%"><label>Appearance:</label></div>
						<div class="sheet-item" style="width:30%"><input name="attr_NPCApperance" type="text"></div>
						<div class="sheet-item" style="width:10%"><label>Personality:</label></div>
						<div class="sheet-item" style="width:50%"><input name="attr_NPCPersonality" type="text"></div>
							</div>

					<div class="sheet-2colrow">
						<div class="sheet-col"><!--Left Side Top -->
							<br>
							<h3>Characteristics</h3>
							<div class="sheet-row">
								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCWSR" type="roll" value="/em rolls @{NPCName}'s Weapon Skill: [[1d100]] Target: [[@{NPCWS}+ ?{Modifier|0}]]."><label>WS</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCWS" type="number" value="0" style="text-align: center;"/></div>

								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCBSR" type="roll" value="/em rolls @{NPCName}'s Ballistic Skill: [[1d100]] Target: [[@{NPCBS}+ ?{Modifier|0}]]."><label>BS</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCBS" type="number" value="0" style="text-align: center;"/></div>

								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCSR" type="roll" value="/em rolls @{NPCName}'s Strength: [[1d100]] Target: [[@{NPCS}+ ?{Modifier|0}]]."><label>S</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCS" type="number" value="0" style="text-align: center;"/></div>

								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCTR" type="roll" value="/em rolls @{NPCName}'s Toughness: [[1d100]] Target: [[@{NPCT}+ ?{Modifier|0}]]."><label>T</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCT" type="number" value="0" style="text-align: center;"/></div>

								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCAcR" type="roll" value="/em rolls @{NPCName}'s Agility: [[1d100]] Target: [[@{NPCAc}+ ?{Modifier|0}]]."><label>Ag</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCAc" type="number" value="0" style="text-align: center;"/></div>
							</div>
							<div class="sheet-row">
								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCIntR" type="roll" value="/em rolls @{NPCName}'s Intelligence: [[1d100]] Target: [[@{NPCInt}+ ?{Modifier|0}]]."><label>Int</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCInt" type="number" value="0" style="text-align: center;"/></div>

								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCPerR" type="roll" value="/em rolls @{NPCName}'s Perception: [[1d100]] Target: [[@{NPCPer}+ ?{Modifier|0}]]."><label>Per</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCPer" type="number" value="0" style="text-align: center;"/></div>

								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCWPR" type="roll" value="/em rolls @{NPCName}'s Willpower: [[1d100]] Target: [[@{NPCWP}+ ?{Modifier|0}]]."><label>WP</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCWP" type="number" value="0" style="text-align: center;"/></div>

								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCFelR" type="roll" value="/em rolls @{NPCName}'s Fellowship: [[1d100]] Target: [[@{NPCFel}+ ?{Modifier|0}]]."><label>Fel</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCFel" type="number" value="0" style="text-align: center;"/></div>

								<div class="sheet-item" style="width: 8%;">
									<button name="roll_NPCPerR" type="roll" value="/em rolls @{NPCName}'s Influence: [[1d100]] Target: [[@{NPCInf}+ ?{Modifier|0}]]."><label>Inf</label></button>
								</div>
								<div class="sheet-item" style="width: 12%;"><input name="attr_NPCInf" type="number" value="0" style="text-align: center;"/></div>
							</div>
							<br>
							</br>
							<h3>Unnatural Characteristics</h3>
							<div class="sheet-row">
								<div class="sheet-item" style="width: 5%;"><label>WS</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnWS" type="number" value="0" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 5%;"><label>BS</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnBS" type="number" value="0" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 5%;"><label>S</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnS" type="number" value="0" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 5%;"><label>T</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnT" type="number" value="0" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 5%;"><label>Ag</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnAg" type="number" value="0" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 5%;"><label>Int</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnInt" type="number" value="0" style="text-align: center;" /></div>
								<div class="sheet-item" style="width: 5%;"><label>Per</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnPer" type="number" value="0" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 5%;"><label>WP</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnWP" type="number" value="0" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 5%;"><label>Fel</label></div>
								<div class="sheet-item" style="width: 6%;"><input name="attr_NPCUnFel" type="number" value="0" style="text-align: center;"/></div>
							</div>
							<br>
							</br>
							<h3>Movement</h3>
							<div class="sheet-row">
								<div class="sheet-item" style="width: 20%;"><label>Half Move: </label></div>
								<div class="sheet-item" style="width: 8%;"><input name="attr_NPCHalfMove" type="number" value="0" placeholder="AB" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 20%;"><label>Full Move: </label></div>
								<div class="sheet-item" style="width: 8%;"><input name="attr_NPCFullMove" type="number" value="0" placeholder="x2" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 16%;"><label>Charge: </label></div>
								<div class="sheet-item" style="width: 8%;"><input name="attr_NPCChargeMove" type="number" value="0" placeholder="x3" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 10%;"><label>Run: </label></div>
								<div class="sheet-item" style="width: 8%;"><input name="attr_NPCRunMove" type="number" value="0" placeholder="x6" style="text-align: center;"/></div>
							</div>
							<h3>Fatigue</h3>
							<div class="sheet-row">
								<div class="sheet-item" style="width: 20%;"><label>Threshold:</label></div>
								<div class="sheet-item" style="width: 8%;"><input name="attr_NPCFatigueThreshold" type="number" style="text-align: center;"/></div>
								<div class="sheet-item" style="width: 16%;"><label>Current: </label></div>
								<div class="sheet-item" style="width: 8%;"><input name="attr_NPCFatigue" type="number" style="text-align: center;"/></div>
							</div>
							<br/>
							<h3>Armour &amp; Defence</h3>
							<div class="sheet-2colrow">
								<div class="sheet-col">
									<div class="sheet-armourblock">&nbsp;</div>
									<div class="sheet-quickborder sheet-armourblock"><label>Head</label> <input name="attr_NPCHArmour" type="number" placeholder="Ar"/> <label>(1-10)</label> <input name="attr_NPCHTotal" type="number" placeholder="Soak"/></div>
								<br />
									<div class="sheet-quickborder sheet-armourblock"><label>AR</label> <input name="attr_NPCArArmour" type="number" placeholder="Ar"/> <label>(11-20)</label> <input name="attr_NPCArTotal" type="number"  placeholder="Soak"/></div>
									<div class="sheet-quickborder sheet-armourblock"><label>Body</label> <input name="attr_NPCBArmour" type="number" placeholder="Ar"/> <label>(31-70)</label> <input name="attr_NPCBTotal" type="number"  placeholder="Soak"/></div>
									<div class="sheet-quickborder sheet-armourblock"><label>AL</label> <input name="attr_NPCAlArmour" type="number" placeholder="Ar"/> <label>(21-30)</label> <input name="attr_NPCAlTotal" type="number" placeholder="Soak"/></div>
									<div class="sheet-quickborder sheet-armourblock" style="margin: 20px auto auto 11%;"><label>LR</label> <input name="attr_NPCLrArmour" type="number" placeholder="Ar"/> <label>(71-85)</label> <input name="attr_NPCLrTotal" type="number" placeholder="Soak"/></div>
									<div class="sheet-quickborder sheet-armourblock" style="margin: 20px auto auto 11%;"><label>LL</label> <input name="attr_NPCLlArmour" type="number" placeholder="Ar"/> <label>(86-00)</label> <input name="attr_NPCLlTotal" type="number" placeholder="Soak"/></div>
								</div>
								<div class="sheet-col sheet-fate">
									<h3>Wounds</h3>
									<div class="sheet-row">
										<div class="sheet-item" style="width:65%">
											<label>Total: </label>
										</div>
										<div class="sheet-item" style="width:20%">
											<input name="attr_NPCWounds_max" type="number" style="text-align: center;">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:65%">
											<label>Current: </label>
										</div>
										<div class="sheet-item" style="width:20%">
											<input name="attr_NPCWounds" type="number" style="text-align: center;">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:65%">
											<label>Critical Damage: </label>
										</div>
										<div class="sheet-item" style="width:20%">
											<input name="attr_NPCCritical" type="number" style="text-align: center;">
										</div>
									</div>
									<h3>Conditions</h3>
									<div class="sheet-row">
										<div class="sheet-item" style="width:100%">
											<input name="attr_NPC1stCondition" type="text">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:100%">
											<input name="attr_NPC2ndCondition" type="text">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:100%">
											<input name="attr_NPC3rdCondition" type="text">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:100%">
											<input name="attr_NPC4thCondition" type="text">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:100%">
											<input name="attr_NPC5thCondition" type="text">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:100%">
											<input name="attr_NPC6thCondition" type="text">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:100%">
											<input name="attr_NPC7thCondition" type="text">
										</div>
									</div>
									<div class="sheet-row">
										<div class="sheet-item" style="width:100%">
											<input name="attr_NPC8thCondition" type="text">
										</div>
									</div>
								</div>
							</div>
							<h3>Size</h3>
							<div class="sheet-item" style="width: 45%;"><select class="sizeselect" name="attr_NPCSize">
								<option value="0">Average (4)</option>
								<option value="-3">Miniscule (1)</option>
								<option value="-2">Puny (2)</option>
								<option value="-1">Weedy (3)</option>
								<option value="1">Hulking (5)</option>
								<option value="2">Enormous (6)</option>
								<option value="3">Massive (7)</option>
								<option value="4">Immense (8)</option>
								<option value="5">Monumental (9)</option>
								<option value="6">Titanic (10)</option>
							</div>

						</div>
						<div class="sheet-col">
							<br>
							</br>
							<div>
								<h3>Skills</h3>
								<textarea name="attr_NpcBaA" style="margin:auto; height:100px;"></textarea>
							</div>
							<div>
								<h3>Talents &amp; Traits</h3>
								<textarea name="attr_NpcNotes" style="margin:auto; height:100px;"></textarea>
							</div>
							<div>
								<h3>Gear &amp; Weapons</h3>
								<textarea name="attr_NpcSkills" style="margin:auto; height:100px;"></textarea>
							</div>
							<div>
								<h3>Special Rules</h3>
								<textarea name="attr_NpcTaT" style=" margin:auto; height:100px;"></textarea>
							</div>
							<div>
								<h3>Miscellaneous &amp; Notes</h3>
								<textarea name="attr_NpcWaG" style="margin:auto; height:100px;"></textarea>
							</div>
						</div>
					</div>
					<div class="sheet-2colrow">
					<br>
					</br>
						<div class="sheet-col"><!--Left Weapon-->
							<div class="sheet-quickborder">
								<div class="sheet-row">
									<div class="sheet-item" style="width: 15%;"><label>Name:</label></div>
									<div class="sheet-item" style="width: 55%;"><input name="attr_NPC1Rangedweaponname" type="text" /></div>
									<div class="sheet-item" style="width: 12%;"><label>Class:</label></div>
									<div class="sheet-item" style="width: 15%;"><input name="attr_NPC1Rangedweaponclass" type="text" /></div>
								</div>
								<div class="sheet-row">
									<div class="sheet-item" style="width: 12%;"><label>Range:</label></div>
									<div class="sheet-item" style="width: 10%;"><input name="attr_NPC1Rangedweaponrange" type="text" /></div>
									<div class="sheet-item" style="width: 15%;"><label>Damage:</label></div>
									<div class="sheet-item" style="width: 15%;"><input name="attr_NPC1Rangedweapondamage" type="text" /></div>
									<div class="sheet-item" style="width: 10%;"><label>Type:</label></div>
									<div class="sheet-item" style="width: 18%;"><input name="attr_NPC1Rangedweapontype" type="text" /></div>
									<div class="sheet-item" style="width: 9%;"><label>Pen:</label></div>
									<div class="sheet-item" style="width: 9%;"><input name="attr_NPC1Rangedweaponpen" type="text" value="0" /></div>
								</div>
								<div class="sheet-row">
									<div class="sheet-item" style="width: 9%;"><label>RoF:</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC1Rangedweaponsingle" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 2%;"><label>/</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC1Rangedweaponsemi" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 2%;"><label>/</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC1Rangedweaponfull" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 9%;"><label>Clip:</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC1Rangedweaponclip" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 2%;"><label>/</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC1Rangedweaponclip_max" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 15%;"><label>Reload:</label></div>
									<div class="sheet-item" style="width: 16%;"><input name="attr_NPC1Rangedweaponreload" type="text" /></div>
									<div class="sheet-item" style="width: 8%;"><button name="roll_NPC1Rangeddamage" type="roll" value="/me uses @{NPC1Rangedweaponname} [[@{NPC1Rangedweapondamage}]] @{NPC1Rangedweapontype} damage! (Pen: @{NPC2Rangedweaponpen})"> <label>R-D</label> </button></div>
									<div class="sheet-item" style="width: 8%;"><button name="roll_NPC1Meleeddamage" type="roll" value="/me uses @{NPC1Rangedweaponname} [[@{NPC1Rangedweapondamage} +@{NPCUnS}+(floor(@{NPCS}/10))]] @{NPC2Rangedweapontype} damage! (Pen: @{NPC2Rangedweaponpen})"> <label>M-D</label> </button></div>
								</div>
								<div class="sheet-row">
									<div class="sheet-item" style="width: 15%;"><label>Special:</label></div>
									<div class="sheet-item" style="width: 73%;"><input name="attr_NPC1Rangedweaponspecial" type="text" /></div>
									<div class="sheet-item" style="width: 6%;"><button name="roll_NPC1Rangedhit" type="roll" value="/me uses @{NPC1Rangedweaponname} [[1d100]] Target [[@{NPCBS} +[[ ?{Aim | Half aim (+10),+10| No aim (+0),+0 | Full aim (+20),+20} + ?{Range | Point Blank (+30),+30 | Short Range (+10),+10 | Standard range (+0),+0 | Long Range (-10),-10 | Extreme Range (-30),-30} + ?{Rate of Fire/Attack Type|Standard (+10),+10 | Semi auto (+0),+0 | Full Auto (-10),-10 | Called Shot (-20),-20 | Suppressing Fire (-20),-20} + ?{Modifier|0} ]]]]."> <label>R-H</label> </button></div>
									<div class="sheet-item" style="width: 6%;"><button name="roll_NPC1Meleedhit" type="roll" value="/me uses @{NPC1Rangedweaponname} [[1d100]] Target [[@{NPCWS}+ [[?{Aim | Half aim (+10),+10 | No aim (+0),+0 | Full aim (+20),+20} + ?{Attack Type | All out (+30),+30| Charge (+20),+20 |Standard (+10),+10 | Swift Attack (+0),+0 | Lighting (-10),-10} + ?{Modifier|0}]]]]."> <label>M-H</label> </button></div>
								</div>
							</div>
						</div>
						<div class="sheet-col"><!--Left Weapon-->
							<div class="sheet-quickborder">
								<div class="sheet-row">
									<div class="sheet-item" style="width: 15%;"><label>Name:</label></div>
									<div class="sheet-item" style="width: 55%;"><input name="attr_NPC2Rangedweaponname" type="text" /></div>
									<div class="sheet-item" style="width: 12%;"><label>Class:</label></div>
									<div class="sheet-item" style="width: 15%;"><input name="attr_NPC2Rangedweaponclass" type="text" /></div>
								</div>
								<div class="sheet-row">
									<div class="sheet-item" style="width: 12%;"><label>Range:</label></div>
									<div class="sheet-item" style="width: 10%;"><input name="attr_NPC2Rangedweaponrange" type="text" /></div>
									<div class="sheet-item" style="width: 15%;"><label>Damage:</label></div>
									<div class="sheet-item" style="width: 15%;"><input name="attr_NPC2Rangedweapondamage" type="text" /></div>
									<div class="sheet-item" style="width: 10%;"><label>Type:</label></div>
									<div class="sheet-item" style="width: 18%;"><input name="attr_NPC2Rangedweapontype" type="text" /></div>
									<div class="sheet-item" style="width: 9%;"><label>Pen:</label></div>
									<div class="sheet-item" style="width: 9%;"><input name="attr_NPC2Rangedweaponpen" type="text" value="0" /></div>
								</div>
								<div class="sheet-row">
									<div class="sheet-item" style="width: 9%;"><label>RoF:</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC2Rangedweaponsingle" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 2%;"><label>/</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC2Rangedweaponsemi" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 2%;"><label>/</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC2Rangedweaponfull" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 9%;"><label>Clip:</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC2Rangedweaponclip" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 2%;"><label>/</label></div>
									<div class="sheet-item" style="width: 6%;"><input name="attr_NPC2Rangedweaponclip_max" type="text" value="0" /></div>
									<div class="sheet-item" style="width: 15%;"><label>Reload:</label></div>
									<div class="sheet-item" style="width: 16%;"><input name="attr_NPC2Rangedweaponreload" type="text" /></div>
									<div class="sheet-item" style="width: 8%;"><button name="roll_NPC2Rangeddamage" type="roll" value="/me uses @{NPC2Rangedweaponname} does [[@{NPC2Rangedweapondamage}]] @{NPC2Rangedweapontype} damage! (Pen: @{NPC2Rangedweaponpen})"> <label>R-D</label> </button></div>
									<div class="sheet-item" style="width: 8%;"><button name="roll_NPC2Meleeddamage" type="roll" value="/me uses @{NPC2Rangedweaponname} [[@{NPC2Rangedweapondamage} +@{NPCUnS}+(floor(@{NPCS}/10))]] @{NPC2Rangedweapontype} damage! (Pen: @{NPC2Rangedweaponpen})"> <label>M-D</label> </button></div>
								</div>
								<div class="sheet-row">
									<div class="sheet-item" style="width: 15%;"><label>Special:</label></div>
									<div class="sheet-item" style="width: 73%;"><input name="attr_NPC2Rangedweaponspecial" type="text" /></div>
									<div class="sheet-item" style="width: 6%;"><button name="roll_NPC2Rangedhit" type="roll" value="/me uses @{NPC2Rangedweaponname} [[1d100]] Target [[@{NPCBS} +[[ ?{Aim | Half aim (+10),+10| No aim (+0),+0 | Full aim (+20),+20} + ?{Range | Point Blank (+30),+30 | Short Range (+10),+10 | Standard range (+0),+0 | Long Range (-10),-10 | Extreme Range (-30),-30} + ?{Rate of Fire/Attack Type|Standard (+10),+10 | Semi auto (+0),+0 | Full Auto (-10),-10 | Called Shot (-20),-20 | Suppressing Fire (-20),-20} + ?{Modifier|0} ]]]]."> <label>R-H</label> </button></div>
									<div class="sheet-item" style="width: 6%;"><button name="roll_NPC2Meleedhit" type="roll" value="/me uses @{NPC2Rangedweaponname} [[1d100]] Target [[@{NPCWS}+ [[?{Aim | Half aim (+10),+10 | No aim (+0),+0 | Full aim (+20),+20} + ?{Attack Type | All out (+30),+30| Charge (+20),+20 |Standard (+10),+10 | Swift Attack (+0),+0 | Lighting (-10),-10} + ?{Modifier|0}]]]]."> <label>M-H</label> </button></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</fieldset>
		</div> <!-- This is the closing div for the hidden grouping for NPC repeatable -->
	</div>
</div>

<div class="sheet-section-journal"><!-- Journal Tab-->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
	<div class="sheet-wrapper">
		<h3>Journal Entry</h3>
		<div><input style="font-size: 18pt; height: 35px;" align="middle" name="attr_NotesTitle" type="text"></div>
		<textarea name="attr_othernotes"></textarea>
		<fieldset class="repeating_journalnotes">
			<div><input style="font-size: 18pt; height: 35px;" align="middle" name="attr_NotesTitle" type="text"></div>
			<textarea name="attr_journalnotesRe"></textarea>
		</fieldset>
	</div>
</div>

<div class="sheet-section-vehicles"><!-- Vehicles Tab -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
	<div class="sheet-wrapper">
		<h3>Vehicles</h3>
		<fieldset class="repeating_Vehicles">
			<div class="sheet-quickborder">
				<div class="sheet-row">
					<div class="sheet-item" style="width: 8%;"><label>Name:</label></div>
					<div class="sheet-item" style="width: 27%;"><input name="attr_VehName" type="text" /></div>
					<div class="sheet-item" style="width: 8%;"><label>Type:</label></div>
					<div class="sheet-item" style="width: 22%;"><input name="attr_VehType" type="text" /></div>
					<div class="sheet-item" style="width: 8%;"><label>Armour:</label></div>
					<div class="sheet-item" style="width: 27%;"><input name="attr_VehSize" type="text" /></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width: 13%;"><label>Tactical Speed:</label></div>
					<div class="sheet-item" style="width: 8%;"><input name="attr_VehTacSpeed" type="text" /></div>
					<div class="sheet-item" style="width: 13%;;"><label>Cruising Speed:</label></div>
					<div class="sheet-item" style="width: 8%;"><input name="attr_VehCruSpeed" type="text" /></div>
					<div class="sheet-item" style="width: 13%;;"><label>Manoeuvrability:</label></div>
					<div class="sheet-item" style="width: 8%;"><input name="attr_VehManoeuvrability" type="text" /></div>
					<div class="sheet-item" style="width: 8%;"><label>Integrity:</label></div>
					<div class="sheet-item" style="width: 5%;"><input name="attr_VehIntegrity" type="text" /></div>
					<div class="sheet-item" style="width: 8%;"><label>Size:</label></div>
					<div class="sheet-item" style="width: 16%;"><input name="attr_VehArmour" type="text" /></div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width: 8%;;"><label>Traits:</label></div>
					<div class="sheet-item" style="width: 92%;"><input name="attr_VehTraits" type="text" /> </div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width: 8%;;"><label>Crew:</label></div>
					<div class="sheet-item" style="width: 92%;"><input name="attr_VehCrew" type="text" /> </div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width: 8%;;"><label>Weapons:</label></div>
					<div class="sheet-item" style="width: 92%;"><input name="attr_Weapons" type="text" /> </div>
				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width: 8%;;"><label>Misc:</label></div>
					<div class="sheet-item" style="width: 92%;"><input name="attr_VehicleMisc" type="text" /> </div>
				</div>
			</div>
		</fieldset>
	</div>
</div>

<div class="sheet-section-psykana"><!-- Psykana Tab Tab -->
	<!-- This section contains Psychic Powers, Focus Power Rolls, and other Psyker Specific characteristics -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
	<div class="sheet-wrapper">
		<h3>Psychic Powers</h3>
		<div class="sheet-2colrow">
			<div class="sheet-col">
				<div class="sheet-row">
					<div class="sheet-item" style="width: 50px;"><label>Class:</label></div>
					<div class="sheet-item" style="width: 100px;">
						<select class="charaselect" name="attr_PsykerClass">
							<option value="@{Bound}"><b>Bound</option>
							<option value="@{Unbound}"><b>Unbound</option>
							<option value="@{Daemonic}"><b>Daemonic</option>
						</select>
					</div>
					<div class="sheet-item" style="width: 85px; margin-left: 20px"><label>Psy Rating:</label></div>
					<div class="sheet-item" style="width: 50px;"><input name="attr_PsyRating" type="number" placeholder="0" /></div>
				</div>
				<br>
				<fieldset class="repeating_PsyPowers">
					<div class="sheet-quickborder">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 11%;"><label>Name:</label></div>
							<div class="sheet-item" style="width: 89%;"><input name="attr_PsyName" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 12%;"><label>Action:</label></div>
							<div class="sheet-item" style="width: 28%;"><input name="attr_PsyAction" type="text" /></div>
							<div class="sheet-item" style="width: 15%;;"><label>Subtype:</label></div>
							<div class="sheet-item" style="width: 45%;"><input name="attr_PsySubtype" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 25%;"><label>Focus Power:</label></div>
							<select class="charaselect" style="width: 30%;" name="attr_PsyFocusPower">
								<option value="?{Custom|0}"><b>Custom</option>
								<option value="@{Perception}"><b>Perception</option>
								<option value="@{Willpower} + (-20 + @{Psyniscience1} + @{Psyniscience2} + @{Psyniscience3} + @{Psyniscience4})"><b>Psyniscience WP</option>
								<option value="@{Perception} + (-20 + @{Psyniscience1} + @{Psyniscience2} + @{Psyniscience3} + @{Psyniscience4})"><b>Psyniscience Per</option>
								<option value="@{Willpower}"><b>Willpower</option>
								<option value="@{Corruption}"><b>Corruption</option>
							</select>
							<div class="sheet-item" style="width: 30%;"><label>Power Modifier:</label></div>
							<div class="sheet-item" style="width: 15%;"><input name="attr_PsyPowerModifier" type="number" value="0" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 12%;"><label>Range:</label></div>
							<div class="sheet-item" style="width: 17%;"><input name="attr_PsyRange" type="text" /></div>
							<div class="sheet-item" style="width: 17%;;"><label>Sustained:</label></div>
							<div class="sheet-item" style="width: 19%;"><input name="attr_PsySustained" type="text" /></div>
							<div class="sheet-item" style="width: 25%;"><label>Damage Type:</label></div>
							<div class="sheet-item" style="width: 10%;"><input name="attr_PsyDamageType" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 15%;"><label>Damage:</label></div>
							<div class="sheet-item" style="width: 21%;"><input name="attr_PsyDamage" type="text" /></div>
							<div class="sheet-item" style="width: 8%;"><label>Pen:</label></div>
							<div class="sheet-item" style="width: 17%;"><input name="attr_PsyPen" type="text" /></div>
							<div class="sheet-item" style="width: 12%;"><button name="roll_PsyHit" type="roll" value="/em uses @{PsyName} [[1d100]] Target [[@{PsyFocusPower} + ((@{PsyRating} - ?{Psy Use?|@{PsyRating}}) * 10) + @{PsyPowerModifier} + ?{Modifier|0}]]."> <label>Cast</label> </button></div>
							<div class="sheet-item" style="width: 15%;"><button name="roll_PsyDamage" type="roll" value="/me does [[?{Damage|1d10})]] @{PsyDamageType} damage! Pen: [[?{Penetration|0}]]"> <label>Damage</label> </button></div>
							<div class="sheet-item" style="width: 12%;"><button name="roll_PsyInfo" type="roll" value="&{template:default} {{name=@{PsyName}}} {{Action=@{PsyAction}}} {{SubType(s)=@{PsySubtype}}} {{Range=@{PsyRange}}} {{Sustained?=@{PsySustained}}} {{Effect=@{PsyPowersEffect}}} "> <label>Info</label> </button></div>
						</div>
						<div><textarea name="attr_PsyPowersEffect"></textarea></div>
					</div>
				</fieldset>
			</div>
			<div class="sheet-col">
				<div class="sheet-row">
					<div class="sheet-item" style="width: 20%;"><label>Max Push:</label></div>
					<div class="sheet-item" style="width: 15%;"><input name="attr_MaxPust" type="number" placeholder="+2/3/4"/></div>
					<div class="sheet-item" style="width: 20%;"><label>Sustaining:</label></div>
					<div class="sheet-item" style="width: 45%;"><input name="attr_Sustaining" type="number" placeholder="+10 PP / -1 PR"/></div>
				</div>
				<br>
				<fieldset class="repeating_PsyPowers">
					<div class="sheet-quickborder">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 11%;"><label>Name:</label></div>
							<div class="sheet-item" style="width: 89%;"><input name="attr_PsyName2" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 12%;"><label>Action:</label></div>
							<div class="sheet-item" style="width: 28%;"><input name="attr_PsyAction2" type="text" /></div>
							<div class="sheet-item" style="width: 15%;;"><label>Subtype:</label></div>
							<div class="sheet-item" style="width: 45%;"><input name="attr_PsySubtype2" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 25%;"><label>Focus Power:</label></div>
							<select class="charaselect" style="width: 30%;" name="attr_PsyFocusPower2">
								<option value="?{Custom|0}"><b>Custom</option>
								<option value="@{Perception}"><b>Perception</option>
								<option value="@{Willpower} + (-20 + @{Psyniscience1} + @{Psyniscience2} + @{Psyniscience3} + @{Psyniscience4})"><b>Psyniscience WP</option>
								<option value="@{Perception} + (-20 + @{Psyniscience1} + @{Psyniscience2} + @{Psyniscience3} + @{Psyniscience4})"><b>Psyniscience Per</option>
								<option value="@{Willpower}"><b>Willpower</option>
							</select>
							<div class="sheet-item" style="width: 30%;"><label>Power Modifier:</label></div>
							<div class="sheet-item" style="width: 15%;"><input name="attr_PsyPowerModifier2" type="number" value="0" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 12%;"><label>Range:</label></div>
							<div class="sheet-item" style="width: 17%;"><input name="attr_PsyRange2" type="text" /></div>
							<div class="sheet-item" style="width: 17%;;"><label>Sustained:</label></div>
							<div class="sheet-item" style="width: 19%;"><input name="attr_PsySustained2" type="text" /></div>
							<div class="sheet-item" style="width: 25%;"><label>Damage Type:</label></div>
							<div class="sheet-item" style="width: 10%;"><input name="attr_PsyDamageType2" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 15%;"><label>Damage:</label></div>
							<div class="sheet-item" style="width: 21%;"><input name="attr_PsyDamage2" type="text" /></div>
							<div class="sheet-item" style="width: 8%;"><label>Pen:</label></div>
							<div class="sheet-item" style="width: 17%;"><input name="attr_PsyPen2" type="text" /></div>
							<div class="sheet-item" style="width: 12%;"><button name="roll_PsyHit2" type="roll" value="/em uses @{PsyName2} [[1d100]] Target [[@{PsyFocusPower2} + ((@{PsyRating} - ?{Psy Use?|1}) * 10) + @{PsyPowerModifier2} + ?{Modifier|0}]]."> <label>Cast</label> </button></div>
							<div class="sheet-item" style="width: 15%;"><button name="roll_PsyDamage2" type="roll" value="/me does [[?{Damage|1d10})]] @{PsyDamageType2} damage! Pen: [[?{Penetration|0}]]."> <label>Damage</label> </button></div>
							<div class="sheet-item" style="width: 12%;"><button name="roll_PsyInfo2" type="roll" value="&{template:default} {{name=@{PsyName2}}} {{Action=@{PsyAction2}}} {{SubType(s)=@{PsySubtype2}}} {{Range=@{PsyRange2}}} {{Sustained?=@{PsySustained2}}} {{Effect=@{PsyPowersEffect2}}} "> <label>Info</label> </button></div>
						</div>
						<div><textarea name="attr_PsyPowersEffect2"></textarea></div>
					</div>
				</fieldset>
			</div>
		</div>
	</div>
</div>


<div class="sheet-section-gear"><!-- Gear Tab -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
	<div class="sheet-wrapper">
		<div class="sheet-2colrow">
		<!-- Left Side -->
			<div class="sheet-col">
				<h3>Ranged Weapons</h3>
				<fieldset class="repeating_Rangedweapons">
					<div class="sheet-quickborder">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 13%;"><label>Name:</label></div>
							<div class="sheet-item" style="width: 60%;"><input name="attr_Rangedweaponname" type="text" /></div>
							<div class="sheet-item" style="width: 12%;"><label>Class:</label></div>
							<div class="sheet-item" style="width: 15%;"><input name="attr_Rangedweaponclass" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 12%;"><label>Range:</label></div>
							<div class="sheet-item" style="width: 10%;"><input name="attr_Rangedweaponrange" type="text" /></div>
							<div class="sheet-item" style="width: 15%;"><label>Damage:</label></div>
							<div class="sheet-item" style="width: 15%;"><input name="attr_Rangedweapondamage" type="text" /></div>
							<div class="sheet-item" style="width: 10%;"><label>Type:</label></div>
							<div class="sheet-item" style="width: 18%;"><input name="attr_Rangedweapontype" type="text" /></div>
							<div class="sheet-item" style="width: 9%;"><label>Pen:</label></div>
							<div class="sheet-item" style="width: 11%;"><input name="attr_Rangedweaponpen" type="text" value="0" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 9%;"><label>RoF:</label></div>
							<div class="sheet-item" style="width: 6%;"><input name="attr_Rangedweaponsingle" type="text" value="0" /></div>
							<div class="sheet-item" style="width: 2%;"><label>/</label></div>
							<div class="sheet-item" style="width: 6%;"><input name="attr_Rangedweaponsemi" type="text" value="0" /></div>
							<div class="sheet-item" style="width: 2%;"><label>/</label></div>
							<div class="sheet-item" style="width: 6%;"><input name="attr_Rangedweaponfull" type="text" value="0" /></div>
							<div class="sheet-item" style="width: 9%;"><label>Clip:</label></div>
							<div class="sheet-item" style="width: 6%;"><input name="attr_Rangedweaponclip" type="text" value="0" /></div>
							<div class="sheet-item" style="width: 2%;"><label>/</label></div>
							<div class="sheet-item" style="width: 6%;"><input name="attr_Rangedweaponclip_max" type="text" value="0" /></div>
							<div class="sheet-item" style="width: 15%;"><label>Reload:</label></div>
							<div class="sheet-item" style="width: 15%;"><input name="attr_Rangedweaponreload" type="text" /></div>
							<div class="sheet-item" style="width: 16%;"><button name="roll_Rangedhit" type="roll" value="/me uses @{Rangedweaponname} [[1d100]] Target [[@{BallisticSkill} +[[ ?{Aim | Half aim (+10),+10| No aim (+0),+0 | Full aim (+20),+20} + ?{Range | Point Blank (+30),+30 | Short Range (+10),+10 | Standard range (+0),+0 | Long Range (-10),-10 | Extreme Range (-30),-30} + ?{Rate of Fire/Attack Type|Standard (+10),+10 | Semi auto (+0),+0 | Full Auto (-10),-10 | Called Shot (-20),-20 | Suppressing Fire (-20),-20} + ?{Modifier|0} ]]]]."> <label>Hit</label> </button></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 15%;"><label>Special:</label></div>
							<div class="sheet-item" style="width: 69%;"><input name="attr_Rangedweaponspecial" type="text" /></div>
							<div class="sheet-item" style="width: 16%;"><button name="roll_Rangeddamage" type="roll" value="/me does [[@{Rangedweapondamage}]] @{Rangedweapontype} damage! (Pen: @{Rangedweaponpen})"> <label>Damage</label> </button></div>
						</div>
					</div>
				</fieldset>
<!-- Break between Ranged and Melee -->
				<h3>Melee Weapons</h3>
				<fieldset class="repeating_meleeweapons">
					<div class="sheet-quickborder">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 13%;"><label>Name:</label></div>
							<div class="sheet-item" style="width: 60%;"><input name="attr_meleeweaponname" type="text" /></div>
							<div class="sheet-item" style="width: 12%;"><label>Class:</label></div>
							<div class="sheet-item" style="width: 15%;"><input name="attr_meleeweaponclass" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 15%;"><label>Damage:</label></div>
							<div class="sheet-item" style="width: 20%;"><input name="attr_meleeweapondamage" type="text" /></div>
							<div class="sheet-item" style="width: 12%;"><label>Type:</label></div>
							<div class="sheet-item" style="width: 18%;"><input name="attr_meleeweapontype" type="text" /></div>
							<div class="sheet-item" style="width: 10%;"><label>Pen:</label></div>
							<div class="sheet-item" style="width: 10%;"><input name="attr_meleeweaponpen" type="text" value="0" /></div>
							<div class="sheet-item" style="width: 16%;"><button name="roll_meleehit" type="roll" value="/em uses @{meleeweaponname} [[1d100]] Target [[@{WeaponSkill}+ [[?{Aim | Half aim (+10),+10 | No aim (+0),+0 | Full aim (+20),+20} + ?{Attack Type | All out (+30),+30| Charge (+20),+20 |Standard (+10),+10 | Swift Attack (+0),+0 | Lighting (-10),-10} + ?{Modifier|0}]]]]"> <label>Hit</label> </button></div>
						</div>
							<div class="sheet-row">
							<div class="sheet-item" style="width: 15%;"><label>Special:</label></div>
							<div class="sheet-item" style="width: 69%;"><input name="attr_meleeweaponspecial" type="text" /> </div>
							<div class="sheet-item" style="width: 16%;"><button name="roll_meleedamage" type="roll" value="/me does [[@{meleeweapondamage}+@{UnS}+(floor(@{strength}/10))]] @{meleeweapontype} damage! (Pen: @{meleeweaponpen})"> <label>Damage</label> </button></div>
						</div>
					</div>
				</fieldset>
			</div>
			<!-- Right Side -->
			<div class="sheet-col">
				<h3>Cybernetics</h3>
				<div class="sheet-quickborder">
					<fieldset class="repeating_Cybernetics">
						<div class="sheet-item" style="width:90%">
							<input name="attr_Cybernetics" type="text">
						</div>
						<div class="sheet-item" style="width:10%">
							<input name="attr_CyberneticsPage" type="text" placeholder="pg#">
						</div>
					</fieldset>
				</div>
				<h3>Gear</h3>
				<div class="sheet-quickborder">
					<div class="sheet-row">
						<div class="sheet-item" style="width:42%">
							<label>Base Carry Weight S+T: </label>
						</div>
						<select name="attr_GearCarry" style="width:10%" class="sheet-input-selectbox">
							<option value="0.0" >NA</option>
							<option value="0.9" >0</option>
							<option value="2.25" >1</option>
							<option value="4.5">2</option>
							<option value="9">3</option>
							<option value="18">4</option>
							<option value="27">5</option>
							<option value="36" selected>6</option>
							<option value="45">7</option>
							<option value="56">8</option>
							<option value="67">9</option>
							<option value="78">10</option>
							<option value="90">11</option>
							<option value="112">12</option>
							<option value="225">13</option>
							<option value="337">14</option>
							<option value="450">15</option>
							<option value="675">16</option>
							<option value="900">17</option>
							<option value="1350">18</option>
							<option value="1800">19</option>
							<option value="2250">20</option>
						</select>
						<div class="sheet-item" style="width:9%">
						</div>
						<div class="sheet-item" style="width:10%">
							<label>Mod: </label>
						</div>
						<div class="sheet-item" style="width:13%">
							<input name="attr_GearCarryMod" type="number" value="0">
						</div>
					</div>
					<div class="sheet-row">
						<div class="sheet-item" style="width:10%">
							<label>Max:</label>
						</div>
						<div class="sheet-item" style="width:15%">
							<input disabled="true" name="attr_GearCarryMax" type="number" value="@{GearCarry} + @{GearCarryMod}">
						</div>
						<div class="sheet-item" style="width:17%">
							<label>Available: </label>
						</div>
						<div class="sheet-item" style="width:15%">
							<input disabled="true" name="attr_GearCarryAvailible" type="number" value="@{GearCarry} + @{GearCarryMod} - @{GearCarryCurrent}">
						</div>
						<div class="sheet-item" style="width:1%">
						</div>
						<div class="sheet-item" style="width:15%">
							<label>Current : </label>
						</div>
						<div class="sheet-item" style="width:15%">
							<input name="attr_GearCarryCurrent" type="text">
						</div>
					</div>
					<fieldset class="repeating_Gears">
						<div class="sheet-item" style="width:80%">
							<input name="attr_Gears" type="text">
						</div>
						<div class="sheet-item" style="width:10%">
							<input name="attr_GeasrWt" type="text" placeholder="wt.">
						</div>
						<div class="sheet-item" style="width:10%">
							<input name="attr_GearsPage" type="text" placeholder="pg#">
						</div>
					</fieldset>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Shipsheet begin -->
<div class="sheet-section-ship">
	<div class="sheet-wrapper">
		<div style="width:100%;text-align:center">
			<div class="sheet-col" style="width:100%">
					<input name="attr_ShipName" type="text" style="height:50px;font-size:30px; font-weight:bold; text-align:center;width:100%" placeholder="Ship Name" />
			</div>
		</div>
		<br>
		<div class="sheet-2colrow">
			<div class="sheet-col sheet-col2" style="width:100%">
				<div class="sheet-row">
					<div class="sheet-item" style="width: 12%;"><label>Hull:</label></div>
					<div class="sheet-item" style="width: 88%;"><input name="attr_ShipHull" type="text" /></div>
				</div>
				<div class="sheet-2colrow">
					<div class="sheet-col sheet-col2" style="width:100%">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 22%;"><label>Speed:</label></div>
							<div class="sheet-item" style="width: 78%;"><input name="attr_ShipSpeed" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 54%;"><label>Manoeuvrability:</label></div>
							<div class="sheet-item" style="width: 46%;"><input name="attr_ShipManoeuvrability" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 38%;"><label>Detection:</label></div>
							<div class="sheet-item" style="width: 62%;"><input name="attr_ShipDetection" type="text" /></div>
						</div>
					</div>
					<div class="sheet-col sheet-col2" style="width:100%">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 28%;"><label>Shields:</label></div>
							<div class="sheet-item" style="width: 34%;"><input name="attr_ShipShields1" type="text" /></div>
							<div class="sheet-item" style="width: 4%;"><label>/</label></div>
							<div class="sheet-item" style="width: 34%;"><input name="attr_ShipShields2" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 28%;"><label>Armour:</label></div>
							<div class="sheet-item" style="width: 72%;"><input name="attr_ShipArmour" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 50%;"><label>Hull Integrity:</label></div>
							<div class="sheet-item" style="width: 23%;"><input name="attr_ShipIntegrity1" type="text" /></div>
							<div class="sheet-item" style="width: 4%;"><label>/</label></div>
							<div class="sheet-item" style="width: 23%;"><input name="attr_ShipIntegrity2" type="text" /></div>
						</div>
					</div>
				</div>
			</div>
			<div class="sheet-col sheet-col2" style="width:100%">
				<div class="sheet-row">
					<div class="sheet-item" style="width: 12%;"><label>Class:</label></div>
					<div class="sheet-item" style="width: 58%;"><input name="attr_ShipClass" type="text" /></div>
					<div class="sheet-item" style="width: 22%;"><label>Turn Rating:</label></div>
					<div class="sheet-item" style="width: 8%;"><input name="attr_ShipTurnRating" type="text" /></div>
				</div>
				<div class="sheet-2colrow">
					<div class="sheet-col sheet-col2" style="width:100%">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 80%;"><button name="roll_CR" type="roll" value="/em rolls Crew Rating: [[1d100]] Target: [[@{ShipCrewRating}+ ?{Modifier|0}]]."><label>Crew Rating</label></button></div>
							<div class="sheet-item" style="width: 20%;"><input name="attr_ShipCrewRating" type="number" value="0"></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 80%;"><label>Unnatural Crew Rating:</label></div>
							<div class="sheet-item" style="width: 20%;"><input name="attr_ShipUnCrewRating" type="number" value="0"></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 50%;"><label>Turret Rating:</label></div>
							<div class="sheet-item" style="width: 50%;"><input name="attr_ShipTurretRating" type="text" /></div>
						</div>
					</div>
					<div class="sheet-col sheet-col2" style="width:100%">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 34%;"></div>
							<div class="sheet-item" style="width: 33%;"><label>Current:</label></div>
							<div class="sheet-item" style="width: 33%;"><label>Max:</label></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 28%;"><label>Crew:</label></div>
							<div class="sheet-item" style="width: 34%;"><input name="attr_ShipCrew1" type="text" /></div>
							<div class="sheet-item" style="width: 4%;"><label>/</label></div>
							<div class="sheet-item" style="width: 34%;"><input name="attr_ShipCrew2" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 28%;"><label>Moral:</label></div>
							<div class="sheet-item" style="width: 34%;"><input name="attr_ShipMoral1" type="text" /></div>
							<div class="sheet-item" style="width: 4%;"><label>/</label></div>
							<div class="sheet-item" style="width: 34%;"><input name="attr_ShipMoral2" type="text" /></div>
						</div>

					</div>
				</div>
			</div>
		</div>

		<div class="sheet-2colrow">
			<div class="sheet-col sheet-col2" style="width:100%">
				<div class="sheet-2colrow">
					<div class="sheet-col sheet-col2" style="width:100%">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 60%;"><label>Power Max:</label></div>
							<div class="sheet-item" style="width: 40%;"><input name="attr_ShipPowerMax" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 60%;"><label>Power Used:</label></div>
							<div class="sheet-item" style="width: 40%;"><input disabled="true"  name="attr_ShipPowerUsed" type="text" value="@{ShipSupplementalComponentsPowerTotal} + @{ShipEssentialComponentsPowerTotal}"/></div>
						</div>
					</div>
					<div class="sheet-col sheet-col2" style="width:100%">
						<div class="sheet-row">
							<div class="sheet-item" style="width: 60%;"><label>Space Max:</label></div>
							<div class="sheet-item" style="width: 40%;"><input name="attr_ShipSpaceMax" type="text" /></div>
						</div>
						<div class="sheet-row">
							<div class="sheet-item" style="width: 60%;"><label>Space Used:</label></div>
							<div class="sheet-item" style="width: 40%;" ><input disabled="true"  name="attr_ShipSpaceUsed" type="text" value="@{ShipSupplementalComponentsSpaceTotal} + @{ShipEssentialComponentsSpaceTotal}"/></div>
						</div>
					</div>
				</div>
			</div>
			<div class="sheet-col sheet-col2" style="width:100%">
				<div class="sheet-row">
					<div class="sheet-item" style="width: 34%;"><label>Weapon Capacity:</label></div>
					<div class="sheet-item" style="width: 12%;"><label>Dorsal:</label></div>
					<div class="sheet-item" style="width: 10%;"><input name="attr_ShipWeaponDorsal" type="text" /></div>
					<div class="sheet-item" style="width: 12%;"><label>Prow:</label></div>
					<div class="sheet-item" style="width: 10%;"><input name="attr_ShipWeaponProw" type="text" /></div>
					<div class="sheet-item" style="width: 12%;"><label>Keel:</label></div>
					<div class="sheet-item" style="width: 10%;"><input name="attr_ShipWeaponKeel" type="text" /></div>

				</div>
				<div class="sheet-row">
					<div class="sheet-item" style="width: 34%;"><label></label></div>
					<div class="sheet-item" style="width: 12%;"><label>Port:</label></div>
					<div class="sheet-item" style="width: 10%;"><input name="attr_ShipWeaponPort" type="text" /></div>
					<div class="sheet-item" style="width: 18%;"><label>Starboard:</label></div>
					<div class="sheet-item" style="width: 10%;"><input name="attr_ShipWeaponStarboard" type="text" /></div>
				</div>
			</div>
		</div>
		<br>
		<div style="width:100%">
			<h3>Weapons Components</h3>
			<fieldset class="repeating_ShipWeapons" name="attr_repeating_ShipWeapons">
				<table style="width:100%">
					<tr>
						<td style="width:30%">
							<h2 style="width:100%;text-align:center">Name</h2>
						</td>
						<td style="width:11%">
							<h2 style="width:100%;text-align:center">Type</h2>
						</td>
						<td style="width:8%">
							<h2 style="width:100%;text-align:center">Strength</h2>
						</td>
						<td style="width:7%">
							<h2 style="width:100%;text-align:center">Crit</h2>
						</td>
						<td style="width:10%">
							<h2 style="width:100%;text-align:center">Damage</h2>
						</td>
						<td style="width:7%">
							<h2 style="width:100%;text-align:center">Range</h2>
						</td>
						<td style="width:15%">
							<h2 style="width:100%;text-align:center">Location</h2>
						</td>
							<td style="width:5%">
						</td>
					</tr>
				</table>
				<div style="width:100%">
					<div class="sheet-item" style="width:30%; text-align:center">
						<input type="text" name="attr_ShipWeaponsName" style="width:100%;text-align:center" />
					</div>
					<div class="sheet-item" style="width:15%; text-align:center">
						<select name="attr_ShipWeaponsType" style="height:25px; width:100%" class="sheet-input-selectbox">
							<option value="0" >Unknown</option>
							<option value="1" selected>Macro Battery</option>
							<option value="2">Lance</option>
							<option value="3">Bay</option>
							<option value="4">Torpedoes</option>
						</select>
					</div>
					<div class="sheet-item" style="width:8%; text-align:center">
						<input type="text" name="attr_ShipWeaponsStrength" />
					</div>
					<div class="sheet-item" style="width:7%; text-align:center">
						<input type="text" name="attr_ShipWeaponsCrit" />
					</div>
					<div class="sheet-item" style="width:10%; text-align:center">
						<input type="text" name="attr_ShipWeaponsDamage" />
					</div>
					<div class="sheet-item" style="width:15px;">
						<button type="roll" name="roll_shipDamage" value="/me attacks with @{ShipName}'s weapon @{ShipWeaponsName}! Damage: [[ @{ShipWeaponsDamage} + ?{Modifier|0} ]].">
							<label>R</label>
						</button>
					</div>
					<div class="sheet-item" style="width:15%; text-align:center">
						<input type="text" name="attr_ShipWeaponsRange" />
					</div>
					<div class="sheet-item" style="width:10%; text-align:center">
						<select name="attr_ShipWeaponsLocation" style="height:25px; width:100%" class="sheet-input-selectbox">
							<option value="0">Unknown</option>
							<option value="1" selected>Dorsal</option>
							<option value="2">Prow</option>
							<option value="3">Keel</option>
							<option value="4">Port</option>
							<option value="5">Starboard</option>
						</select>
					</div>
					<div class="sheet-body">
						<textarea name="attr_ShipWeaponsdesc"; ></textarea>
					</div>
				</div>
			</fieldset>
		</div>


		<div class="sheet-2colrow">
			<!-- left col -->
			<div class="sheet-col sheet-col2" style="width:100%">
			<input type="hidden" name="attr_ShipEssentialComponentsPowerTotal" value="0">
			<input type="hidden" name="attr_ShipEssentialComponentsSpaceTotal" value="0">
				<h3>Essential Components</h3>
				<fieldset class="repeating_ShipEssentialComponents" name="attr_repeating_ShipEssentialComponents">
					<table style="width:100%">
						<tr>
							<td style="width:60%">
								<h2  style="width:100%;text-align:center">Name</h2>
							</td>
							<td style="width:10%">
								<h2 style="width:100%;text-align:center">Power</h2>
							</td>
							<td style="width:10%">
								<h2  style="width:100%;text-align:center">Space</h2>
							</td>
							<td style="width:10%">
								<h2  style="width:100%;text-align:center">SP</h2>
							</td>
								<td style="width:10%">
							</td>
						</tr>
					</table>
					<div style="width:100%">
						<div class="sheet-item" style="width:60%"><input type="text" name="attr_ShipEssentialComponentName" style="width:100%;text-align:left" />
						</div>
						<div class="sheet-item" style="width:10%; text-align:center">
							<input type="number" name="attr_ShipEssentialComponentPower";text-align:center" value="0"/>
						</div>
						<div class="sheet-item" style="width:10%; text-align:center">
							<input type="number" name="attr_ShipEssentialComponentSpace";text-align:center" value="0" />
						</div>
						<div class="sheet-item" style="width:10%; text-align:center">
							<input type="text" name="attr_ShipEssentialComponentSP";text-align:center" />
						</div>
						<div class="sheet-body">
							<textarea name="attr_ShipEssentialComponentsdesc"; ></textarea>
						</div>
					</div>
				</fieldset>
			</div>
			<!-- right col -->

			<div class="sheet-col sheet-col2">
				<h3>Supplemental Components</h3>
				<input type="hidden" name="attr_ShipSupplementalComponentsPowerTotal" value="0">
				<input type="hidden" name="attr_ShipSupplementalComponentsSpaceTotal" value="0">
				<fieldset class="repeating_ShipSupplementalComponents" name="attr_repeating_ShipSupplementalComponents">
					<table style="width:100%">
						<tr>
							<td style="width:60%"><h2  style="width:100%;text-align:center">Name</h2>
							</td>
								<td style="width:10%"><h2 style="width:100%;text-align:center">Power</h2>
							</td>
								<td style="width:10%"><h2  style="width:100%;text-align:center">Space</h2>
							</td>
								<td style="width:10%"><h2  style="width:100%;text-align:center">SP</h2>
							</td>
							<td style="width:10%"></td>
						</tr>
					</table>
					<div style="width:100%">
						<div class="sheet-item" style="width:60%">
							<input type="text" name="attr_ShipSupplementalComponentName"/>
						</div>
						<div class="sheet-item" style="width:10%; text-align:center">
							<input type="number" name="attr_ShipSupplementalComponentPower" value="0" />
						</div>
						<div class="sheet-item" style="width:10%; text-align:center">
							<input type="number" name="attr_ShipSupplementalComponentSpace" value="0" />
						</div>
						<div class="sheet-item" style="width:10%; text-align:center">
							<input type="text" name="attr_ShipSupplementalComponentSP" />
						</div>
						<div class="sheet-body">
								<textarea name="attr_ShipSupplementalComponentsdesc";></textarea>
						</div>
					</div>
				</fieldset>
			</div>
		</div>
		<br>
		<div>
			<h3>Complications/Past History</h3>
			<textarea name="attr_ShipComplications" style="width:95%"></textarea>
		</div>
		<br>
		<div>
			<h3>Skill Modifiers</h3>
			<textarea name="attr_ShipSkillModifiers" style="width:95%"></textarea>
		</div>
		<br>
		<div>
			<h3>Special Actions</h3>
			<textarea name="attr_ShipSpecialActions" style="width:95%"></textarea>
		</div>
		<div>
			<h3>Notes</h3>
			<textarea name="attr_ShipNotes" style="width:95%"></textarea>
		</div>
	</div>
</div>
<script type="text/worker">
/* ---- BEGIN: TheAaronSheet.js ---- */
// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
// By:       The Aaron, Arcane Scriptomancer
// Contact:  https://app.roll20.net/users/104025/the-aaron
var TAS = TAS || (function(){
    'use strict';
    var version = '0.2.3',
        lastUpdate = 1457098056,
        loggingSettings = {
            debug: {
                key:     'debug',
                title:   'DEBUG',
                color: {
                    bgLabel: '#7732A2',
                    label:   '#F2EF40',
                    bgText:  '#FFFEB7',
                    text:    '#7732A2'
                }
            },
            error: {
                key:     'error',
                title:   'Error',
                color: {
                    bgLabel: '#C11713',
                    label:   'white',
                    bgText:  '#C11713',
                    text:    'white'
                }
            },
            warn: {
                key:     'warn',
                title:   'Warning',
                color: {
                    bgLabel: '#F29140',
                    label:   'white',
                    bgText:  '#FFD8B7',
                    text:    'black'
                }
            },
            info: {
                key:     'info',
                title:   'Info',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            notice: {
                key:     'notice',
                title:   'Notice',
                color: {
                    bgLabel: '#33C133',
                    label:   'white',
                    bgText:  '#ADF1AD',
                    text:    'black'
                }
            },
            log: {
                key:     'log',
                title:   'Log',
                color: {
                    bgLabel: '#f2f240',
                    label:   'black',
                    bgText:  '#ffff90',
                    text:    'black'
                }
            },
            callstack: {
                key:     'TAS',
                title:   'function',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            callstack_async: {
                key:     'TAS',
                title:   'ASYNC CALL',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#413FA9',
                    text:    'white'
                }
            },
            TAS: {
                key:     'TAS',
                title:   'TAS',
                color: {
                    bgLabel: 'grey',
                    label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                    bgText:  'grey',
                    text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                }
            }
        },
        config = {
            debugMode: false,
            logging: {
                log: true,
                notice: true,
                info: true,
                warn: true,
                error: true,
                debug: false
            }
        },
        callstackRegistry = [],
		queuedUpdates = {}, //< Used for delaying saves till the last momment.
    complexType = function(o){
        switch(typeof o){
            case 'string':
                return 'string';
            case 'boolean':
                return 'boolean';
            case 'number':
                return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
            case 'function':
                return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
            case 'object':
                return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
            default:
                return typeof o;
        }
    },
	dataLogger = function(primaryLogger,secondaryLogger,data){
        _.each(data,function(m){
            var type = complexType(m);
            switch(type){
                case 'string':
                    primaryLogger(m);
                    break;
                case 'undefined':
                case 'null':
                case 'NaN':
                    primaryLogger('['+type+']');
                    break;
                case 'number':
                case 'not a number':
                case 'integer':
                case 'decimal':
                case 'boolean':
                    primaryLogger('['+type+']: '+m);
                    break;
                default:
                    primaryLogger('['+type+']:=========================================');
                    secondaryLogger(m);
                    primaryLogger('=========================================================');
                    break;
            }
        });
	},
    colorLog = function(options){
        var coloredLoggerFunction,
            key = options.key,
            label = options.title || 'TAS',
            lBGColor = (options.color && options.color.bgLabel) || 'blue',
            lTxtColor = (options.color && options.color.label) || 'white',
            mBGColor = (options.color && options.color.bgText) || 'blue',
            mTxtColor = (options.color && options.color.text) || 'white';
        coloredLoggerFunction = function(message){
            console.log(
                '%c '+label+': %c '+message + ' ',
                'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                'background-color: '+mBGColor+';color: '+mTxtColor+';'
            );
        };
        return function(){
            if('TAS'===key || config.logging[key]){
               dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments));
            }
        };
    },
    logDebug  = colorLog(loggingSettings.debug),
    logError  = colorLog(loggingSettings.error),
    logWarn   = colorLog(loggingSettings.warn),
    logInfo   = colorLog(loggingSettings.info),
    logNotice = colorLog(loggingSettings.notice),
    logLog    = colorLog(loggingSettings.log),
    log       = colorLog(loggingSettings.TAS),
    logCS     = colorLog(loggingSettings.callstack),
    logCSA    = colorLog(loggingSettings.callstack_async),
    registerCallstack = function(callstack,label){
        var idx=_.findIndex(callstackRegistry,function(o){
            return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                _.difference(o.stack,callstack).length === 0 &&
                o.label === label;
        });
        if(-1 === idx){
            idx=callstackRegistry.length;
            callstackRegistry.push({
                stack: callstack,
                label: label
            });
        }
        return idx;
    },
    setConfigOption = function(options){
        var newconf =_.defaults(options,config);
        newconf.logging=_.defaults(
            (options && options.logging)||{},
            config.logging
        );
        config=newconf;
    },

    debugMode = function(){
        config.logging.debug=true;
        config.debugMode = true;
    },
    getCallstack = function(){
        var e = new Error('dummy'),
            stack = _.map(_.rest(e.stack.replace(/^[^\(]+?[\n$]/gm, '')
            .replace(/^\s+at\s+/gm, '')
            .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
            .split('\n')),function(l){
                return l.replace(/\s+.*$/,'');
            });
        return stack;
    },
    logCallstackSub = function(cs){
        var matches, csa;
        _.find(cs,function(line){
            matches = line.match(/TAS_CALLSTACK_(\d+)/);
            if(matches){
               csa=callstackRegistry[matches[1]];
               logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
               logCallstackSub(csa.stack);
               return true;
            }
            logCS(line);
            return false;
        });
    },
    logCallstack = function(){
        var cs;
        if(config.debugMode){
            cs = getCallstack();
            cs.shift();
            log('==============================> CALLSTACK <==============================');
            logCallstackSub(cs);
            log('=========================================================================');
        }
    },
    wrapCallback = function (label, callback, context){
        var callstack;
        if('function' === typeof label){
            context=callback;
            callback=label;
            label=undefined;
        }
        if(!config.debugMode){
            return (function(cb,ctx){
                return function(){
                    cb.apply(ctx||{},arguments);
                };
            }(callback,context));
        }

        callstack = getCallstack();
        callstack.shift();

        return (function(cb,ctx,cs,lbl){
            var ctxref=registerCallstack(cs,lbl);
            /*jshint -W054 */
            return new Function('cb','ctx','TASlog',
                "return function TAS_CALLSTACK_"+ctxref+"(){"+
                    "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                    "cb.apply(ctx||{},arguments);"+
                    "TASlog('Exiting: '+(cb.name||'(anonymous function)'));"+
                "};")(cb,ctx,log);
            /*jshint +W054 */
        }(callback,context,callstack,label));
    },
    prepareUpdate = function( attribute, value ){
        queuedUpdates[attribute]=value;
    },
    applyQueuedUpdates = function() {
      setAttrs(queuedUpdates);
      queuedUpdates = {};
    },
	namesFromArgs = function(args,base){
        return _.chain(args)
            .reduce(function(memo,attr){
                if('string' === typeof attr) {
                    memo.push(attr);
                } else if(_.isArray(args) || _.isArguments(args)){
                    memo = namesFromArgs(attr,memo);
                }
                return memo;
            },(_.isArray(base) && base) || [])
            .uniq()
            .value();
	},
	addId = function(obj,value){
		Object.defineProperty(obj,'id',{
			value: value,
			writeable: false,
			enumerable: false
		});
	},
	addProp = function(obj,prop,value,fullname){
		(function(){
            var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
			    full_pname = fullname || prop,
                pvalue=value;
            _.each(['S','I','F'],function(p){
                if( !_.has(obj,p)){
                    Object.defineProperty(obj, p, {
                        value: {},
                        enumerable: false,
                        readonly: true
                    });
                }
            });
            if( !_.has(obj,'D')){
                Object.defineProperty(obj, 'D', {
                    value: _.reduce(_.range(10),function(m,d){
                            Object.defineProperty(m, d, {
                                value: {},
                                enumerable: true,
                                readonly: true
                            });
                            return m;
                        },{}),
                    enumerable: false,
                    readonly: true
                });
            }
            // Raw value
			Object.defineProperty(obj, pname, {
                enumerable: true,
				set: function(v){
                    if(v!==pvalue) {
                        pvalue=v;
                        prepareUpdate(full_pname,v);
                    }
				},
				get: function(){
					return pvalue;
				}
			});

            // string value
			Object.defineProperty(obj.S, pname, {
                enumerable: true,
				set: function(v){
                    var val=v.toString();
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return pvalue.toString();
				}
			});
            // int value
			Object.defineProperty(obj.I, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseInt(v,10) || 0;
                    if(val !== pvalue){
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseInt(pvalue,10) || 0;
				}
			});
            // float value
			Object.defineProperty(obj.F, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseFloat(v) || 0;
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseFloat(pvalue) || 0;
				}
			});
            _.each(_.range(10),function(d){
                Object.defineProperty(obj.D[d], pname, {
                    enumerable: true,
                    set: function(v){
                        var val=(parseFloat(v) || 0).toFixed(d);
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return (parseFloat(pvalue) || 0).toFixed(d);
                    }
                });
            });
		}());
	},

	repeating = function( section ) {
		return (function(s){
			var sectionName = s,
				attrNames = [],
				fieldNames = [],
				operations = [],
                after = [],

			repAttrs = function TAS_Repeating_Attrs(){
				attrNames = namesFromArgs(arguments,attrNames);
				return this;
			},
			repFields = function TAS_Repeating_Fields(){
				fieldNames = namesFromArgs(arguments,fieldNames);
				return this;
			},
			repReduce = function TAS_Repeating_Reduce(func, initial, final, context) {
				operations.push({
                    type: 'reduce',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    memo: (_.isUndefined(initial) && 0) || initial,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
			repMap = function TAS_Repeating_Map(func, final, context) {
				operations.push({
                    type: 'map',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
            repEach = function TAS_Repeating_Each(func, final, context) {
				operations.push({
                    type: 'each',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repTap = function TAS_Repeating_Tap(final, context) {
				operations.push({
                    type: 'tap',
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repAfter = function TAS_Repeating_After(callback,context) {
				after.push({
                    callback: (callback && _.isFunction(callback) && callback) || _.noop,
                    context: context || {}
                });
				return this;
            },
			repExecute = function TAS_Repeating_Execute(callback,context){
				var rowSet = {},
					attrSet = {},
					fieldIds = [],
					fullFieldNames = [];
                repAfter(callback,context);
				// call each operation per row.
				// call each operation's final
				getSectionIDs("repeating_"+sectionName,function(ids){
					fieldIds = ids;
					fullFieldNames = _.reduce(fieldIds,function(memo,id){
						return memo.concat(_.map(fieldNames,function(name){
							return 'repeating_'+sectionName+'_'+id+'_'+name;
						}));
					},[]);
					getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
						_.each(attrNames,function(aname){
							if(values.hasOwnProperty(aname)){
								addProp(attrSet,aname,values[aname]);
							}
						});
						rowSet = _.reduce(fieldIds,function(memo,id){
							var r={};
							addId(r,id);
							_.each(fieldNames,function(name){
								var fn = 'repeating_'+sectionName+'_'+id+'_'+name;
								addProp(r,name,values[fn],fn);
							});
							memo[id]=r;
							return memo;
						},{});
                        _.each(operations,function(op){
                            var res;
                            switch(op.type){
                                case 'tap':
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;
                                case 'each':
                                    _.each(rowSet,function(r){
                                        _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;
                                case 'map':
                                    res = _.map(rowSet,function(r){
                                        return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;
                                case 'reduce':
                                    res = op.memo;
                                    _.each(rowSet,function(r){
                                        res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;
                            }
                        });
                        // finalize attrs
                        applyQueuedUpdates();
                        _.each(after,function(op){
                            _.bind(op.callback,op.context)();
                        });
					});
				});
			};

			return {
				attrs: repAttrs,
				attr: repAttrs,
				column: repFields,
				columns: repFields,
				field: repFields,
				fields: repFields,
				reduce: repReduce,
				inject: repReduce,
				foldl: repReduce,
				map: repMap,
				collect: repMap,
				each: repEach,
                forEach: repEach,
                tap: repTap,
                'do': repTap,
				after: repAfter,
				last: repAfter,
				done: repAfter,
				execute: repExecute,
				go: repExecute,
				run: repExecute
			};
		}(section));
	},
    repeatingSimpleSum = function(section, field, destination){
        repeating(section)
            .attr(destination)
            .field(field)
            .reduce(function(m,r){
                return m + (r.F[field]);
            },0,function(t,r,a){
                a.S[destination]=t;
            })
            .execute();
    };
	console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  The Aaron Sheet  v'+version+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
	console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  Last update: '+(new Date(lastUpdate*1000))+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
    return {
        /* Repeating Sections */
        repeatingSimpleSum: repeatingSimpleSum,
		repeating: repeating,
        /* Configuration */
        config: setConfigOption,
        /* Debugging */
        callback: wrapCallback,
        callstack: logCallstack,
        debugMode: debugMode,
        _fn: wrapCallback,
        /* Logging */
        debug: logDebug,
        error: logError,
        warn: logWarn,
        info: logInfo,
        notice: logNotice,
        log: logLog
    };
}());
/* ---- END: TheAaronSheet.js ---- */
/*on('change:repeating_advancements',function(){
    TAS.repeatingSimpleSum('advancements','advancementRe1xp','XPSpent');
});*/
on('change:repeating_advancements', function(){
    TAS.repeating('advancements')
        .attrs('XPSpent')
        .fields('advancementRe1xp','advancementRe2xp', 'advancementRe3xp')
		.reduce(function(memo, row)
		{
			memo += (row.I.advancementRe1xp);
			memo += (row.I.advancementRe2xp);
			memo += (row.I.advancementRe3xp);
			return memo;
		},0,function(memo, row, attrSet)
		{
			attrSet.I.XPSpent = memo;
		})
		.execute();
});
/*on('change:repeating_Gears', function(){
    TAS.repeating('Gears')  //< set the repeating group we are using
        .attrs('GearCarryCurrent')  //< specify we want access to the total_weight attribute
        .fields('GeasrWt') //< specify we want the item and weight repeating fields
		.reduce(function(memo, row)
		{
			memo += (row.F.GeasrWt);
			return memo;
		},0,function(memo, row, attrSet)
		{
			attrSet.F.GearCarryCurrent = memo;
		})
		.execute();
});*/
on('change:repeating_Gears',function(){
    TAS.repeatingSimpleSum('Gears','GeasrWt','GearCarryCurrent');
});
on('change:repeating_ShipEssentialComponents',function(){
    TAS.repeatingSimpleSum('ShipEssentialComponents','ShipEssentialComponentPower','ShipEssentialComponentsPowerTotal');
});
on('change:repeating_ShipSupplementalComponents',function(){
    TAS.repeatingSimpleSum('ShipSupplementalComponents','ShipSupplementalComponentPower','ShipSupplementalComponentsPowerTotal');
});
on('change:repeating_ShipEssentialComponents',function(){
    TAS.repeatingSimpleSum('ShipEssentialComponents','ShipEssentialComponentSpace','ShipEssentialComponentsSpaceTotal');
});
on('change:repeating_ShipSupplementalComponents',function(){
    TAS.repeatingSimpleSum('ShipSupplementalComponents','ShipSupplementalComponentSpace','ShipSupplementalComponentsSpaceTotal');
});
</script>
